<div class="page-wrapper">
        <!-- ============================================================== -->
        <!-- Bread crumb and right sidebar toggle -->
        <!-- ============================================================== -->
        <div class="page-breadcrumb">
          <div class="row">
            <div class="col-12 d-flex no-block align-items-center">
              <h3 class="page-title">Dashboard Generate Report for 8 Hour</h3>
              <div class="ms-auto text-end">
              </div>
            </div>
          </div>
        </div>
        <p></p>
        
        <!-- Dropdown untuk memilih file -->
        <!-- <select id="fileDropdown">
         <option value="file1.pdf">Download CSV</option>
          <option value="file2.zip">Download Parsed Data</option>
        <!- Tambahkan opsi lain jika diperlukan -->
        <!--Generate Report for Attack -->   
        <div class="row">
          <div class="col-md-12">
            <div class="card">
              <div class="card-body">
                <div class="d-md-flex align-items-center">
                  <div>
                    <button type="button" class="btn btn-info">Generate Here!</button>
                    <br>
                    <br>
                    <h4 class="card-title">Data Attack Report</h4>
                    <h5 class="card-subtitle">Overview of last 8 Hour</h5>
                  </div>
                </div>
                <select id="" class="btn-info">
                  <option value="pdf">download CSV</option>
                  <option value="parsed">download parsed data</option>
                </select>        
                <!-- Tombol untuk memulai unduhan -->
                <button onclick="downloadFile()" class="btn-info">Unduh File</button>   
                  <!-- chart -->  
                    <script src="https://d3js.org/d3.v7.min.js"></script>
                      <!-- <script src="chart.js" defer></script> -->

                 <style>
                    .bar rect {
                                fill: steelblue;
                                stroke: #fff;
                              }
                      .bar text {
                                  fill: #fff;
                                  font: 10px sans-serif;
                                } 
                  </style>
                  <div id="chart"></div>
                <script>
                  
                </script>
                <script>
                // Sample hierarchical data
const data = {
    name: "root",
    value: 100,
    children: [
        {
            name: "child1",
            value: 50,
            children: [
                { name: "child1-1", value: 30 },
                { name: "child1-2", value: 20 }
            ]
        },
        {
            name: "child2",
            value: 41,
            children: [
                { name: "child1-1", value: 41 },
                { name: "child1-2", value: 41 }
            ]
        },
    ]
};

// Define chart dimensions and margins
const width = 800;
const height = 600;
const marginTop = 20;
const marginRight = 20;
const marginBottom = 30;
const marginLeft = 40;

// Define scales
const x = d3.scaleLinear()
    .range([marginLeft, width - marginRight]);

const y = d3.scaleBand()
    .range([marginTop, height - marginBottom])
    .padding(0.1);

// Define axes
const xAxis = g => g
    .attr("transform", `translate(0,${marginTop})`)
    .call(d3.axisTop(x).ticks(width / 80).tickSizeOuter(0));

const yAxis = g => g
    .attr("transform", `translate(${marginLeft},0)`)
    .call(d3.axisLeft(y).tickSizeOuter(0));

// Functions for handling click events
const up = (svg, d) => {
    if (!d.parent || !svg.selectAll(".exit").empty()) return;

    // Rebind the current node to the background.
    svg.select(".background").datum(d.parent);

    // Define two sequenced transitions.
    const transition1 = svg.transition().duration(duration);
    const transition2 = transition1.transition();

    // Mark any currently-displayed bars as exiting.
    const exit = svg.selectAll(".enter")
        .attr("class", "exit");

    // Update the x-scale domain.
    x.domain([0, d3.max(d.parent.children, d => d.value)]);

    // Update the x-axis.
    svg.selectAll(".x-axis").transition(transition1)
        .call(xAxis);

    // Transition exiting bars to the new x-scale.
    exit.selectAll("g").transition(transition1)
        .attr("transform", stagger());

    // Transition exiting bars to the parentâ€™s position.
    exit.selectAll("g").transition(transition2)
        .attr("transform", stack(d.index));

    // Transition exiting rects to the new scale and fade to parent color.
    exit.selectAll("rect").transition(transition1)
        .attr("width", d => x(d.value) - x(0))
        .attr("fill", color(true));

    // Transition exiting text to fade out.
    exit.transition(transition2)
        .attr("fill-opacity", 0)
        .remove();

    // Enter the new bars for the clicked-on data's parent.
    const enter = bar(svg, down, d.parent, ".exit")
        .attr("fill-opacity", 0);

    enter.selectAll("g")
        .attr("transform", (d, i) => `translate(0,${barStep * i})`);

    // Transition entering bars to fade in over the full duration.
    enter.transition(transition2)
        .attr("fill-opacity", 1);

    // Color the bars as appropriate.
    // Exiting nodes will obscure the parent bar, so hide it.
    // Transition entering rects to the new x-scale.
    // When the entering parent rect is done, make it visible!
    enter.selectAll("rect")
        .attr("fill", d => color(!!d.children))
        .attr("fill-opacity", p => p === d ? 0 : null)
      .transition(transition2)
        .attr("width", d => x(d.value) - x(0))
        .on("end", function(p) { d3.select(this).attr("fill-opacity", 1); });
};

// Function to create the chart
const chart = () => {
    const svg = d3.create("svg")
        .attr("viewBox", [0, 0, width, height])
        .attr("width", width)
        .attr("height", height)
        .attr("style", "max-width: 100%; height: auto;");

    x.domain([0, d3.max(data.children, d => d.value)]);

    svg.append("rect")
        .attr("class", "background")
        .attr("fill", "none")
        .attr("pointer-events", "all")
        .attr("width", width)
        .attr("height", height)
        .attr("cursor", "pointer")
        .on("click", (event, d) => up(svg, d));

    svg.append("g")
        .call(xAxis);

    svg.append("g")
        .call(yAxis);

    const root = d3.hierarchy(data)
        .sum(d => d.value)
        .sort((a, b) => b.value - a.value);

    down(svg, root);

    return svg.node();
};

// Initialize the chart
document.addEventListener('DOMContentLoaded', () => {
    const svgNode = chart();
    document.getElementById('chart').appendChild(svgNode);
});

function bar(svg, down, d, selector) {
    const g = svg.insert("g", selector)
        .attr("class", "enter")
        .attr("transform", `translate(0,${marginTop})`)
        .attr("text-anchor", "end")
        .style("font", "10px sans-serif");

    const bar = g.selectAll("g")
        .data(d.children)
        .join("g")
        .attr("cursor", d => !d.children ? null : "pointer")
        .on("click", (event, d) => down(svg, d));

    bar.append("text")
        .attr("x", marginLeft - 6)
        .attr("y", barStep * (1 - barPadding) / 2)
        .attr("dy", ".35em")
        .text(d => d.data.name);

    bar.append("rect")
        .attr("x", x(0))
        .attr("width", d => x(d.value) - x(0))
        .attr("height", barStep * (1 - barPadding));

    return g;
}

function down(svg, d) {
    if (!d.children || d3.active(svg.node())) return;

    // Rebind the current node to the background.
    svg.select(".background").datum(d);

    // Define two sequenced transitions.
    const transition1 = svg.transition().duration(duration);
    const transition2 = transition1.transition();

    // Mark any currently-displayed bars as exiting.
    const exit = svg.selectAll(".enter")
        .attr("class", "exit");

    // Entering nodes immediately obscure the clicked-on bar, so hide it.
    exit.selectAll("rect")
        .attr("fill-opacity", p => p === d ? 0 : null);

    // Transition exiting bars to fade out.
    exit.transition(transition1)
        .attr("fill-opacity", 0)
        .remove();

    // Enter the new bars for the clicked-on data.
    // Per above, entering bars are immediately visible.
    const enter = bar(svg, down, d, ".y-axis")
        .attr("fill-opacity", 0);

    // Have the text fade-in, even though the bars are visible.
    enter.transition(transition1)
        .attr("fill-opacity", 1);

    // Transition entering bars to their new y-position.
    enter.selectAll("g")
        .attr("transform", stack(d.index))
        .transition(transition1)
        .attr("transform", stagger());

    // Update the x-scale domain.
    x.domain([0, d3.max(d.children, d => d.value)]);

    // Update the x-axis.
    svg.selectAll(".x-axis").transition(transition2)
        .call(xAxis);

    // Transition entering bars to the new x-scale.
    enter.selectAll("g").transition(transition2)
        .attr("transform", (d, i) => `translate(0,${barStep * i})`);

    // Color the bars as parents; they will fade to children if appropriate.
    enter.selectAll("rect")
        .attr("fill", color(true))
        .attr("fill-opacity", 1)
        .transition(transition2)
        .attr("fill", d => color(!!d.children))
        .attr("width", d => x(d.value) - x(0));
}

function stack(i) {
    let value = 0;
    return d => {
        const t = `translate(${x(value) - x(0)},${barStep * i})`;
        value += d.value;
        return t;
    };
}

function stagger() {
    let value = 0;
    return (d, i) => {
        const t = `translate(${x(value) - x(0)},${barStep * i})`;
        value += d.value;
        return t;
    };
}

// Additional configurations
const barStep = 27;
const barPadding = 3 / barStep;
const duration = 750;
const color = d3.scaleOrdinal([true, false], ["steelblue", "#aaa"]);
</script>

                </script>
                  <!-- End Chart-->
                  <br>
                  <div class="col-lg-3">
                    <div class="row">
                      <div class="col-6">
                        <div class="bg-dark p-10 text-white text-center">
                          <i class="fas fa-arrow-circle-up fs-3 mb-1 font-16"></i>
                          <h5 class="mb-0 mt-1">2540</h5>
                          <small class="font-light">Total Source</small>
                        </div>
                      </div>
                      <div class="col-6">
                        <div class="bg-dark p-10 text-white text-center">
                          <i class="fas fa-arrow-alt-circle-down  fs-3 mb-1 font-16"></i>
                          <h5 class="mb-0 mt-1">120</h5>
                          <small class="font-light">Total Destination</small>
                        </div>
                      </div>
                      <div class="col-6 mt-3">
                        <div class="bg-dark p-10 text-white text-center">
                          <i class="fas fa-code fs-3 mb-1 font-16"></i>
                          <h5 class="mb-0 mt-1">656</h5>
                          <small class="font-light">Total Request</small>
                        </div>
                      </div>
                      <div class="col-6 mt-3">
                        <div class="bg-dark p-10 text-white text-center">
                          <i class=" fas fa-bolt fs-3 mb-1 font-16"></i>
                          <h5 class="mb-0 mt-1">9540</h5>
                          <small class="font-light">Total Rulename</small>
                        </div>
                      </div>
                    </div>
                  </div>
                  <br>
                  <!--Generate Report for DNS-->
                  <div class="row">
                    <div class="col-md-12">
                      <div class="card">
                        <div class="card-body">
                          <div class="d-md-flex align-items-center">
                            <div> 
                              <h4 class="card-title">Data DNS Report</h4>
                              <h5 class="card-subtitle">Overview of last 8 Hour</h5>
                            </div>
                          </div>
                          <select id="" class="btn-info">
                            <option value="pdf">download CSV</option>
                            <option value="parsed">download parsed data</option>
                          </select>
                          <button onclick="downloadFile()" class="btn-info">Unduh File</button>
                            <!-- column -->
                            <div class="col-md-6">
                                <div class="card">
                                  <div class="card-body">
                                    <h5 class="card-title">Line Chart</h5>
                                    <div class="bars" style="height: 400px; padding: 0px; position: relative;"><canvas class="flot-base" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 458px; height: 400px;" width="458" height="400"></canvas><div class="flot-text" style="position: absolute; inset: 0px; font-size: smaller; color: rgb(84, 84, 84);"><div class="flot-x-axis flot-x1-axis xAxis x1Axis" style="position: absolute; inset: 0px;"><div style="position: absolute; max-width: 65px; top: 381px; left: 18px; text-align: center;" class="flot-tick-label tickLabel">0</div><div style="position: absolute; max-width: 65px; top: 381px; left: 100px; text-align: center;" class="flot-tick-label tickLabel">2</div><div style="position: absolute; max-width: 65px; top: 381px; left: 183px; text-align: center;" class="flot-tick-label tickLabel">4</div><div style="position: absolute; max-width: 65px; top: 381px; left: 265px; text-align: center;" class="flot-tick-label tickLabel">6</div><div style="position: absolute; max-width: 65px; top: 381px; left: 348px; text-align: center;" class="flot-tick-label tickLabel">8</div><div style="position: absolute; max-width: 65px; top: 381px; left: 427px; text-align: center;" class="flot-tick-label tickLabel">10</div></div><div class="flot-y-axis flot-y1-axis yAxis y1Axis" style="position: absolute; inset: 0px;"><div style="position: absolute; top: 366px; left: 9px; text-align: right;" class="flot-tick-label tickLabel">2</div><div style="position: absolute; top: 305px; left: 9px; text-align: right;" class="flot-tick-label tickLabel">5</div><div style="position: absolute; top: 244px; left: 2px; text-align: right;" class="flot-tick-label tickLabel">10</div><div style="position: absolute; top: 183px; left: 2px; text-align: right;" class="flot-tick-label tickLabel">15</div><div style="position: absolute; top: 122px; left: 2px; text-align: right;" class="flot-tick-label tickLabel">20</div><div style="position: absolute; top: 61px; left: 2px; text-align: right;" class="flot-tick-label tickLabel">25</div><div style="position: absolute; top: 0px; left: 2px; text-align: right;" class="flot-tick-label tickLabel">30</div></div></div><canvas class="flot-overlay" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 458px; height: 400px;" width="458" height="400"></canvas></div>
                                  </div>
                                </div>
                              </div>
                          </div>
                            <div class="col-lg-3">
                              <div class="row">
                                <div class="col-6">
                                  <div class="bg-dark p-10 text-white text-center">        
                                    <i class="fas fa-arrow-circle-up fs-3 mb-1 font-16"></i>
                                    <h5 class="mb-0 mt-1">2540</h5>
                                    <small class="font-light">Total Source</small>
                                  </div>
                                </div>
                                <div class="col-6">
                                  <div class="bg-dark p-10 text-white text-center">
                                    <i class="fas fa-arrow-alt-circle-down  fs-3 mb-1 font-16"></i>
                                    <h5 class="mb-0 mt-1">120</h5>
                                    <small class="font-light">Total Destination</small>
                                  </div>
                                </div>
                                <div class="col-6 mt-3">
                                  <div class="bg-dark p-10 text-white text-center">
                                    <i class="fas fa-code fs-3 mb-1 font-16"></i>
                                    <h5 class="mb-0 mt-1">656</h5>
                                    <small class="font-light">Total cccaDestination</small>
                                  </div>
                                </div>
                                <div class="col-6 mt-3">
                                  <div class="bg-dark p-10 text-white text-center">
                                    <i class=" fas fa-bolt fs-3 mb-1 font-16"></i>
                                    <h5 class="mb-0 mt-1">9540</h5>
                                    <small class="font-light">Total Rulename</small>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <br>
                            <!--Generate Report for DNS-->
                            <div class="row">
                              <div class="col-md-12">
                                <div class="card">
                                  <div class="card-body">
                                    <div class="d-md-flex align-items-center">
                                      <div> 
                                        <h4 class="card-title">Data Malware Report</h4>
                                        <h5 class="card-subtitle">Overview of last 8 Hour</h5>
                                      </div>
                                    </div>
                                    <select id="" class="btn-info">
                                      <option value="pdf">download CSV</option>
                                      <option value="parsed">download parsed data</option>
                                    </select>
                                    <button onclick="downloadFile()" class="btn-info">Unduh File</button>
                                      <!-- column -->
                                      <div class="col-md-6">
                                          <div class="card">
                                            <div class="card-body">
                                              <h5 class="card-title">Line Chart</h5>
                                              <div class="bars" style="height: 400px; padding: 0px; position: relative;"><canvas class="flot-base" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 458px; height: 400px;" width="458" height="400"></canvas><div class="flot-text" style="position: absolute; inset: 0px; font-size: smaller; color: rgb(84, 84, 84);"><div class="flot-x-axis flot-x1-axis xAxis x1Axis" style="position: absolute; inset: 0px;"><div style="position: absolute; max-width: 65px; top: 381px; left: 18px; text-align: center;" class="flot-tick-label tickLabel">0</div><div style="position: absolute; max-width: 65px; top: 381px; left: 100px; text-align: center;" class="flot-tick-label tickLabel">2</div><div style="position: absolute; max-width: 65px; top: 381px; left: 183px; text-align: center;" class="flot-tick-label tickLabel">4</div><div style="position: absolute; max-width: 65px; top: 381px; left: 265px; text-align: center;" class="flot-tick-label tickLabel">6</div><div style="position: absolute; max-width: 65px; top: 381px; left: 348px; text-align: center;" class="flot-tick-label tickLabel">8</div><div style="position: absolute; max-width: 65px; top: 381px; left: 427px; text-align: center;" class="flot-tick-label tickLabel">10</div></div><div class="flot-y-axis flot-y1-axis yAxis y1Axis" style="position: absolute; inset: 0px;"><div style="position: absolute; top: 366px; left: 9px; text-align: right;" class="flot-tick-label tickLabel">0</div><div style="position: absolute; top: 305px; left: 9px; text-align: right;" class="flot-tick-label tickLabel">5</div><div style="position: absolute; top: 244px; left: 2px; text-align: right;" class="flot-tick-label tickLabel">10</div><div style="position: absolute; top: 183px; left: 2px; text-align: right;" class="flot-tick-label tickLabel">15</div><div style="position: absolute; top: 122px; left: 2px; text-align: right;" class="flot-tick-label tickLabel">20</div><div style="position: absolute; top: 61px; left: 2px; text-align: right;" class="flot-tick-label tickLabel">25</div><div style="position: absolute; top: 0px; left: 2px; text-align: right;" class="flot-tick-label tickLabel">30</div></div></div><canvas class="flot-overlay" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 458px; height: 400px;" width="458" height="400"></canvas></div>
                                            </div>
                                          </div>
                                        </div>
                                    </div>
                                      <div class="col-lg-3">
                                        <div class="row">
                                          <div class="col-6">
                                            <div class="bg-dark p-10 text-white text-center">        
                                              <i class="fas fa-desktop fs-3 mb-1 font-16"></i>
                                              <h5 class="mb-0 mt-1">2540</h5>
                                              <small class="font-light">Total EndpointHostname</small>
                                            </div>
                                          </div>
                                          <div class="col-6">
                                            <div class="bg-dark p-10 text-white text-center">
                                              <i class="fas fa-file fs-3 mb-1 font-16"></i>
                                              <h5 class="mb-0 mt-1">120</h5>
                                              <small class="font-light">Total Filename</small>
                                            </div>
                                          </div>
                                          <div class="col-6 mt-3">
                                            <div class="bg-dark p-10 text-white text-center">
                                              <i class="fa fa-reddit-alien fs-3 mb-1 font-16"></i>
                                              <h5 class="mb-0 mt-1">656</h5>
                                              <small class="font-light">Total Malname</small>
                                            </div>
                                          </div>
                                          <div class="col-6 mt-3">
                                            <div class="bg-dark p-10 text-white text-center">
                                              <i class=" fas fa-bolt fs-3 mb-1 font-16"></i>
                                              <h5 class="mb-0 mt-1">9540</h5>
                                              <small class="font-light">Total ActResult</small>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                  <script>
                    function downloadFile() {
                      // Mendapatkan nilai terpilih dari dropdown
                      var selectedFile = document.getElementById("fileDropdown").value;
                      
                      // Membuat link untuk mengunduh file
                      var downloadLink = document.createElement("a");
                      downloadLink.href = selectedFile;
                      
                      // Mengatur atribut untuk mengunduh file
                      downloadLink.download = selectedFile;
                      
                      // Mengklik link untuk memulai unduhan
                      downloadLink.click();
                    }
                    </script>
       <!-- <script src="../assets/libs/jquery/dist/jquery.min.js"></script>
       <script src="../assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
       <script src="../assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>
       <script src="../assets/extra-libs/sparkline/sparkline.js"></script>
       <script src="../dist/js/waves.js"></script>
       <script src="../dist/js/sidebarmenu.js"></script>
       <script src="../dist/js/custom.min.js"></script>
       <script src="../assets/libs/jquery/dist/jquery.min.js"></script>
       <script src="../assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
       <script src="../assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>
       <script src="../assets/extra-libs/sparkline/sparkline.js"></script>
       <script src="../dist/js/waves.js"></script>
       <script src="../dist/js/sidebarmenu.js"></script>
       <script src="../dist/js/custom.min.js"></script>
       <script src="../assets/libs/flot/excanvas.js"></script>
       <script src="../assets/libs/flot/jquery.flot.js"></script>
       <script src="../assets/libs/flot/jquery.flot.pie.js"></script>
       <script src="../assets/libs/flot/jquery.flot.time.js"></script>
       <script src="../assets/libs/flot/jquery.flot.stack.js"></script>
       <script src="../assets/libs/flot/jquery.flot.crosshair.js"></script>
       <script src="../assets/libs/flot.tooltip/js/jquery.flot.tooltip.min.js"></script>
       <script src="../dist/js/pages/chart/chart-page-init.js"></script>
       <script src="../assets/libs/jquery/dist/jquery.min.js"></script>
       <script src="../assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
       <script src="../assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>
       <script src="../assets/extra-libs/sparkline/sparkline.js"></script>
       <script src="../dist/js/waves.js"></script>
       <script src="../dist/js/sidebarmenu.js"></script>
       <script src="../dist/js/custom.min.js"></script>
       <script src="../assets/libs/chart/matrix.interface.js"></script>
       <script src="../assets/libs/chart/excanvas.min.js"></script>
       <script src="../assets/libs/flot/jquery.flot.js"></script>
       <script src="../assets/libs/flot/jquery.flot.pie.js"></script>
       <script src="../assets/libs/flot/jquery.flot.time.js"></script>
       <script src="../assets/libs/flot/jquery.flot.stack.js"></script>
       <script src="../assets/libs/flot/jquery.flot.crosshair.js"></script>
       <script src="../assets/libs/chart/jquery.peity.min.js"></script>
       <script src="../assets/libs/chart/matrix.charts.js"></script>
       <script src="../assets/libs/chart/jquery.flot.pie.min.js"></script>
       <script src="../assets/libs/flot.tooltip/js/jquery.flot.tooltip.min.js"></script>
       <script src="../assets/libs/chart/turning-series.js"></script>
       <script src="../dist/js/pages/chart/chart-page-init.js"></script> -->
</table></div></div></div></div></div></div></div>